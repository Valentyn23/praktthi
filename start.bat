@echo off
chcp 65001 > nul
echo ========================================
echo      SecureVision - Ð—Ð°Ð¿ÑƒÑÐº ÑÐ¸ÑÑ‚ÐµÐ¼Ð¸
echo ========================================
echo.

REM ÐŸÐµÑ€ÐµÐ²Ñ–Ñ€ÐºÐ° Python
python --version >nul 2>&1
if errorlevel 1 (
    echo âŒ Python Ð½Ðµ Ð·Ð½Ð°Ð¹Ð´ÐµÐ½Ð¾! Ð’ÑÑ‚Ð°Ð½Ð¾Ð²Ñ–Ñ‚ÑŒ Python 3.8+ Ð· python.org
    pause
    exit /b 1
)

echo âœ… Python Ð·Ð½Ð°Ð¹Ð´ÐµÐ½Ð¾
echo.

REM ÐŸÐµÑ€ÐµÐ²Ñ–Ñ€ÐºÐ° Ñ‚Ð° Ð²ÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ñ Ð·Ð°Ð»ÐµÐ¶Ð½Ð¾ÑÑ‚ÐµÐ¹
if not exist "venv" (
    echo ðŸ“¦ Ð¡Ñ‚Ð²Ð¾Ñ€ÐµÐ½Ð½Ñ Ð²Ñ–Ñ€Ñ‚ÑƒÐ°Ð»ÑŒÐ½Ð¾Ð³Ð¾ ÑÐµÑ€ÐµÐ´Ð¾Ð²Ð¸Ñ‰Ð°...
    python -m venv venv
    echo âœ… Ð’Ñ–Ñ€Ñ‚ÑƒÐ°Ð»ÑŒÐ½Ðµ ÑÐµÑ€ÐµÐ´Ð¾Ð²Ð¸Ñ‰Ðµ ÑÑ‚Ð²Ð¾Ñ€ÐµÐ½Ð¾
)

echo ðŸ”§ ÐÐºÑ‚Ð¸Ð²Ð°Ñ†Ñ–Ñ Ð²Ñ–Ñ€Ñ‚ÑƒÐ°Ð»ÑŒÐ½Ð¾Ð³Ð¾ ÑÐµÑ€ÐµÐ´Ð¾Ð²Ð¸Ñ‰Ð°...
call venv\Scripts\activate.bat

echo ðŸ“¦ Ð’ÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ñ/Ð¾Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ñ Ð·Ð°Ð»ÐµÐ¶Ð½Ð¾ÑÑ‚ÐµÐ¹...
pip install -r requirements.txt --quiet
if errorlevel 1 (
    echo âŒ ÐŸÐ¾Ð¼Ð¸Ð»ÐºÐ° Ð²ÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ñ Ð·Ð°Ð»ÐµÐ¶Ð½Ð¾ÑÑ‚ÐµÐ¹!
    pause
    exit /b 1
)

echo âœ… Ð—Ð°Ð»ÐµÐ¶Ð½Ð¾ÑÑ‚Ñ– Ð²ÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¾
echo.

REM Ð¡Ñ‚Ð²Ð¾Ñ€ÐµÐ½Ð½Ñ Ð¿Ð°Ð¿ÐºÐ¸ Ð´Ð»Ñ Ð»Ð¾Ð³Ñ–Ð²
if not exist "logs" mkdir logs

REM Ð¡Ñ‚Ð²Ð¾Ñ€ÐµÐ½Ð½Ñ/Ð¿ÐµÑ€ÐµÐ²Ñ–Ñ€ÐºÐ° Ð‘Ð”
if not exist "db.sqlite3" (
    echo ðŸ—„ï¸ Ð†Ð½Ñ–Ñ†Ñ–Ð°Ð»Ñ–Ð·Ð°Ñ†Ñ–Ñ Ð±Ð°Ð·Ð¸ Ð´Ð°Ð½Ð¸Ñ…...
    echo âœ… Ð‘Ð°Ð·Ð° Ð´Ð°Ð½Ð¸Ñ… Ð±ÑƒÐ´Ðµ ÑÑ‚Ð²Ð¾Ñ€ÐµÐ½Ð° Ð¿Ñ€Ð¸ Ð·Ð°Ð¿ÑƒÑÐºÑƒ
)

echo.
echo ========================================
echo ðŸš€ Ð—Ð°Ð¿ÑƒÑÐº Ð´Ð¾Ð´Ð°Ñ‚ÐºÑ–Ð²...
echo ========================================
echo.
echo ðŸ“± Telegram Ð±Ð¾Ñ‚ Ð·Ð°Ð¿ÑƒÑÐºÐ°Ñ”Ñ‚ÑŒÑÑ...
echo ðŸŒ Ð’ÐµÐ±-Ð´Ð¾Ð´Ð°Ñ‚Ð¾Ðº Ð·Ð°Ð¿ÑƒÑÐºÐ°Ñ”Ñ‚ÑŒÑÑ...
echo.
echo ðŸ’¡ ÐÐ°Ñ‚Ð¸ÑÐ½Ñ–Ñ‚ÑŒ Ctrl+C Ð´Ð»Ñ Ð·ÑƒÐ¿Ð¸Ð½ÐºÐ¸
echo ========================================
echo.

REM Ð—Ð°Ð¿ÑƒÑÐº Ð¾Ð±Ð¾Ñ… Ð´Ð¾Ð´Ð°Ñ‚ÐºÑ–Ð²
start "Telegram Bot" cmd /k "call venv\Scripts\activate.bat && python bot.py"
start "Web App" cmd /k "call venv\Scripts\activate.bat && python webapp.py"

echo.
echo âœ… Ð”Ð¾Ð´Ð°Ñ‚ÐºÐ¸ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½Ð¾ Ð² Ð¾ÐºÑ€ÐµÐ¼Ð¸Ñ… Ð²Ñ–ÐºÐ½Ð°Ñ…!
echo.
echo ðŸ“± Telegram Ð±Ð¾Ñ‚: Ð¿Ñ€Ð°Ñ†ÑŽÑ” (Ð¿ÐµÑ€ÐµÐ²Ñ–Ñ€Ñ‚Ðµ Ð²Ñ–ÐºÐ½Ð¾ "Telegram Bot")
echo ðŸŒ Ð’ÐµÐ±-Ð´Ð¾Ð´Ð°Ñ‚Ð¾Ðº: http://localhost:5000
echo ðŸ“‹ Ð›Ð¾Ð³Ð¸ Ð·Ð±ÐµÑ€Ñ–Ð³Ð°ÑŽÑ‚ÑŒÑÑ Ð² Ð¿Ð°Ð¿Ñ†Ñ–: logs/
echo.
echo Ð—Ð°ÐºÑ€Ð¸Ð¹Ñ‚Ðµ Ñ†Ðµ Ð²Ñ–ÐºÐ½Ð¾ Ð°Ð±Ð¾ Ð½Ð°Ñ‚Ð¸ÑÐ½Ñ–Ñ‚ÑŒ Ð±ÑƒÐ´ÑŒ-ÑÐºÑƒ ÐºÐ»Ð°Ð²Ñ–ÑˆÑƒ...
pause >nul